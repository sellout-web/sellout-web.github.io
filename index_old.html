<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Items for Sale</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <style>
  .card-img-top {
    width: 100%;
    height: 150px; /* Set a fixed height for thumbnails */
    object-fit: cover; /* Ensures the image is cropped proportionally */
  }
</style>
  <style>
    .item-card {
      text-align: center;
      margin-bottom: 20px;
    }
    .carousel-img {
      max-height: 400px;
      object-fit: contain;
    }
    .btn-demand {
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <h1 class="text-center mb-4">Items for Sale</h1>
    <div id="items-container" class="row"></div>
  </div>

  <!-- Item Carousel Modal -->
  <div class="modal fade" id="itemModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-body">
          <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
            <div id="carousel-inner" class="carousel-inner"></div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const items = [
      { id: 1, name: "ELC fisher price robot toy", price: "60 QAR", images: ["images/cartoy1.jpeg", "images/cartoy2.jpg", "images/cartoy3.jpg"] },
      { id: 2, name: "ELC Vtech tiny tot driver", price: "60 QAR", images: ["images/drivingtoy1.jpeg", "images/drivingtoy2.jpg", "images/drivingtoy3.jpg", "images/drivingtoy4.jpg"] },
      { id: 3, name: "Ride around car with storage", price: "40 QAR", images: ["images/ridecar1.jpg", "images/ridecar2.jpg", "images/ridecar3.jpeg", "images/ridecar4.jpg", "images/ridecar5.jpg"] },
      { id: 4, name: "Doll house with accessories ", price: "100 QAR", images: ["images/dollHouse1.jpeg", "images/dollHouse2.jpeg"] },
      { id: 90, name: "Set of books", price: "40 QAR", images: ["images/bookSet.jpeg"] },
      { id: 91, name: "Piddly books - flap book and animal books - both for 40 QAR", price: "25 QAR each", images: ["images/91_1.jpeg","images/91_2.jpeg","images/91_3.jpeg"] },
      { id: 92, name: "Board books for kids - all for 80 QAR", price: "20 QAR each", images: ["images/92_1.jpeg","images/92_2.jpeg","images/92_3.jpeg"] },
      { id: 93, name: "Children story books from HBKU Press/Scholastic - all for 50 QAR", price: "12 QAR each", images: ["images/93_1.jpeg","images/93_2.jpeg","images/93_3.jpeg","images/93_4.jpeg"] },
      { id: 94, name: "Usborne question answer books with flaps - both for 40 QAR", price: "25 QAR each", images: ["images/94_1.jpeg","images/94_2.jpeg","images/94_3.jpeg"] },
      { id: 95, name: "Set of children story books", price: "All for 30 QAR", images: ["images/95_1.jpeg"] },
      { id: 96, name: "Good condition hard cover books for children - all for 100 QAR", price: "20 QAR each", images: ["images/96_1.jpeg","images/96_2.jpeg","images/96_3.jpeg","images/96_4.jpeg","images/96_5.jpeg","images/96_6.jpeg"] },
      { id: 97, name: "Story books for children - all for 70 QAR", price: "20 QAR each", images: ["images/97_1.jpeg","images/97_2.jpeg","images/97_3.jpeg","images/97_4.jpeg","images/97_5.jpeg"] },
      { id: 98, name: "Phonics books set for young learners.", price: "All for 20 QAR", images: ["images/98_1.jpeg"] },







      { id: 6, name: "Graco DuoGlider, Rascal Swing and Rocker with One-Hand Recline Lever", price: "300 QAR", images: ["images/glider1.jpeg", "images/glider2.jpeg", "images/glider3.jpeg", "images/glider4.jpeg"] },
      { id: 7, name: "Stroller", price: "80 QAR", images: ["images/stroll1.jpeg", "images/stroll2.jpg", "images/stroll3.jpg"] },
      { id: 8, name: "IKEA Cloth Hanger", price: "80 QAR", images: ["images/hanger1.jpeg", "images/hanger2.jpg", "images/hanger3.jpg", "images/hanger4.jpg"] },
      { id: 9, name: "IKEA office desk ergonomic chair", price: "250 QAR", images: ["images/tabChair1.jpeg", "images/tabChair2.jpeg", "images/tabChair3.jpeg", "images/tabChair4.jpeg"] },

      { id: 10, name: "Car seat working condition, barely used", price: "150 QAR", images: ["images/carseat1.jpeg", "images/carseat2.jpeg", "images/carseat3.jpeg"] },



      
      { id: 12, name: "Turkish Bread basket", price: "20 QAR", images: ["images/tbb1.jpg", "images/tbb2.jpg", "images/tbb3.jpg"] },
      { id: 13, name: "IEKA Plastic basket wooden look", price: "35 QAR", images: ["images/ikeab1.jpg", "images/ikeab2.jpg", "images/ikeab3.jpg", "images/ikeab4.jpg", "images/ikeab5.jpeg"] },

      { id: 14, name: "5 ceramic curry bowls+melamine(free)", price: "20 QAR", images: ["images/bowls1.jpeg", "images/bowls2.jpeg"] },

      { id: 15, name: "Home box ceramic square serving Dish like new.", price: "20 QAR", images: ["images/servingDish1.jpeg", "images/servingDish2.jpeg", "images/servingDish3.jpeg", "images/servingDish4.jpeg"] },

      { id: 16, name: "Big Dinner plates X8", price: "10 QAR", images: ["images/bigplates1.jpeg", "images/bigplates2.jpeg"] },
      { id: 17, name: "Small Sncaks plates X6", price: "10 QAR", images: ["images/smallplates1.jpeg", "images/smallplates2.jpeg"] },

      
      { id: 18, name: "Ikea Glass jug", price: "20 QAR", images: ["images/jug1.jpeg", "images/jug2.jpeg", "images/jug3.jpeg"] },
      { id: 19, name: "Set of 6 small juice glasses", price: "20 QAR", images: ["images/juice_glass_set.jpeg"] },
      { id: 20, name: "Set of 6 big glasses with golden rim", price: "20 QAR", images: ["images/godlen_rim_water_glass_set.jpeg"] },


      { id: 21, name: "Russell Hobbs panini press with collection tray 100% working condition", price: "60 QAR", images: ["images/toast1.jpeg", "images/toast2.jpeg", "images/toast3.jpeg", "images/toast4.jpeg"] },
      { id: 22, name: "Pink big storage box in good condition", price: "20 QAR", images: ["images/stbox1.jpeg", "images/stbox2.jpeg"] },
      { id: 23, name: "Hardly used Dish storage box with water collection tray.", price: "20 QAR", images: ["images/dish_st1.jpeg", "images/dish_st2.jpeg", "images/dish_st3.jpeg"] },



      { id: 24, name: "Screws, hammer and magnetic screw driver", price: "40 QAR", images: ["images/screw1.jpeg", "images/screw2.jpeg", "images/screw3.jpeg", "images/screw4.jpeg"] },
      
      // Add more items here...
    ];

    


    const loadItems = () => {
      const container = document.getElementById('items-container');
      const storedDemand = JSON.parse(localStorage.getItem('itemDemand')) || {};
      
      items.forEach(item => {
        if (!storedDemand[item.id]) storedDemand[item.id] = 0;
      });

      // Sort items by demand
      items.sort((a, b) => (storedDemand[b.id] || 0) - (storedDemand[a.id] || 0));

      // Update DOM
      container.innerHTML = '';
      items.forEach(item => {
        container.innerHTML += `
          <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card item-card">
              <img src="${item.images[0]}" class="card-img-top" alt="${item.name}" style="cursor:pointer;" onclick="openCarousel(${item.id})">
              <div class="card-body">
                <h5 class="card-title">${item.name}</h5>
                <p class="card-text">${item.price}</p>
                <a href="https://wa.me/97466081840?text=I am interested in ${item.name}" class="btn btn-success d-block mb-2" target="_blank">Contact on WhatsApp</a>
                <button class="btn btn-primary btn-demand" onclick="incrementDemand(${item.id})">
                  I want this <span class="badge bg-light text-dark ms-2">${storedDemand[item.id]}</span>
                </button>
              </div>
            </div>
          </div>
        `;
      });
      localStorage.setItem('itemDemand', JSON.stringify(storedDemand));
    };

    const openCarousel = (itemId) => {
  const item = items.find(i => i.id === itemId);
  const carouselInner = document.getElementById('carousel-inner');
  carouselInner.innerHTML = '';

  item.images.forEach((img, idx) => {
    carouselInner.innerHTML += `
      <div class="carousel-item ${idx === 0 ? 'active' : ''}">
        <img src="${img}" class="d-block w-100 carousel-img" alt="${item.name}">
      </div>
    `;
  });

  const modal = new bootstrap.Modal(document.getElementById('itemModal'));
  modal.show();

  // Add keyboard navigation for the carousel
  document.addEventListener('keydown', handleCarouselKey);
};

// Function to handle left/right arrow keys for carousel navigation
const handleCarouselKey = (event) => {
  const carousel = document.getElementById('carouselExample');
  if (event.key === 'ArrowLeft') {
    carousel.querySelector('.carousel-control-prev').click();
  } else if (event.key === 'ArrowRight') {
    carousel.querySelector('.carousel-control-next').click();
  }
};

    const incrementDemand = (itemId) => {
      const storedDemand = JSON.parse(localStorage.getItem('itemDemand')) || {};
      storedDemand[itemId] = (storedDemand[itemId] || 0) + 1;
      localStorage.setItem('itemDemand', JSON.stringify(storedDemand));
      loadItems();
    };

    document.addEventListener('DOMContentLoaded', loadItems);

    // Remove the event listener when modal is closed
document.getElementById('itemModal').addEventListener('hidden.bs.modal', () => {
  document.removeEventListener('keydown', handleCarouselKey);
});

  </script>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
  ></script>


</body>
</html>
